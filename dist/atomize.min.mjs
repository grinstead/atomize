var c={},l={};
function p(a){return function(b){function g(d){if(void 0===d)var e=a.l;else if(null===d)e=a.h;else if("boolean"===typeof d)e=a.g;else if("number"===typeof d)e=a.i;else if("string"===typeof d)e=a.j;else if(d instanceof Map)e=a.Map;else if(d instanceof Set)e=a.Set;else if(Array.isArray(d))e=a.Array;else throw Error("TODO");var z=k,A=f;k=d;f=n.length;e(d,h)?m.set(d,0<=f?f<<1|1:-f):0>f&&m.delete(d);k=z;f=A}function h(d,e){if(e===c)n.push(d);else if(d===l)k!==c&&(0<=f&&(f=~(f<<1)),m.set(k,-f),k=c);else if(0<=
f&&(f=~(f<<1),m.set(d,-1)),e=m.get(d),null!=e){if(-1===e)throw Error("Infinite loop when encoding "+d);n.push(0<=e?e:-e)}else g(d)}var n=[],m=new Map,f=0,k=c;g(b);return n}}function q(a){a(2,c)}function r(a){a(4,c)}function t(a,b){b(a?6:8,c)}function u(a,b){if(a!==a)return b(10,c),!1;a===(a|0)?(b(12,c),b(a,c)):(b(14,c),b(a,c));return!0}function v(a,b){b(l);b(16,c);var g=a.length;b(g,c);for(var h=0;h<g;h++)b(a[h]);return!0}function w(a,b){b(18,c);b(a,c);return!0}
function x(a,b){b(l);b(20,c);b(a.size,c);a.forEach(function(g,h){b(h);b(g)});return!0}function y(a,b){b(l);b(22,c);b(a.size,c);a.forEach(function(g){b(g)});return!0};export const ALLOW_SELF_REFERENCE=l;export const encodeVoid=q;export const encodeNull=r;export const encodeBoolean=t;export const encodeNumber=u;export const encodeArray=v;export const encodeString=w;export const encodeMap=x;export const encodeSet=y;export const atomizer=function(a){a=void 0===a?{}:a;return p({l:a["void"]||q,h:a["null"]||r,g:a["boolean"]||t,i:a.number||u,Array:a.Array||v,j:a.string||w,Map:a.Map||x,Set:a.Set||y})};
