var e={},l={},n={},p={},r={};
function u(a){return function(b){function h(c){if(void 0===c)var d=a.m;else if(null===c)d=a.i;else if("boolean"===typeof c)d=a.g;else if("number"===typeof c)d=a.j;else if("string"===typeof c)d=a.l;else if("function"===typeof c)d=a.h;else if(c instanceof Map)d=a.Map;else if(c instanceof Set)d=a.Set;else if(Array.isArray(c))d=a.Array;else{if((d=Object.getPrototypeOf(c))&&d!==Object.prototype)throw Error("TODO");d=a.object}var E=m,F=g;m=c;g=f.length;d(c,k)?q.set(c,0<=g?g<<1|1:-g):0>g&&q.delete(c);m=
E;g=F}function k(c,d){if(d===e||d===l)f.push(c);else if(c===n)m!==e&&(0<=g&&(g=~(g<<1)),q.set(m,-g),m=e);else if(c===p)t.push(f.push(-1)-1);else if(c===r)f[t.pop()]=f.length;else if(0<=g&&(g=~(g<<1),q.set(c,-1)),d=q.get(c),null!=d){if(-1===d)throw Error("Infinite loop when encoding "+c);f.push(0<=d?d:-d)}else h(c)}var f=[],q=new Map,t=[],g=0,m=e;h(b);return f}}function v(a){a(2,e)}function w(a){a(4,e)}function x(a,b){b(a?6:8,e)}
function y(a,b){if(a!==a)return b(10,e),!1;a===(a|0)?(b(12,e),b(a,e)):(b(14,e),b(a,e));return!0}function z(a,b){b(n);b(16,e);b(p);for(var h=a.length,k=0;k<h;k++)b(a[k]);b(r);return!0}function A(a,b){b(18,e);b(a,e);return!0}function B(a,b){b(n);b(20,e);b(p);a.forEach(function(h,k){b(k)});b(r);a.forEach(function(h){b(h)});return!0}function C(a,b){b(n);b(22,e);b(p);a.forEach(function(h){b(h)});b(r);return!0}
function D(a,b){b(n);b(24,e);var h=Object.keys(a),k=h.length;b(p);for(var f=0;f<k;f++)b(h[f]);b(r);for(f=0;f<k;f++)b(a[h[f]]);return!0};function G(a){throw Error("No way to atomize "+a);}function H(a,b){b(a,l)}export const ALLOW_SELF_REFERENCE=n;export const encodeVoid=v;export const encodeNull=w;export const encodeBoolean=x;export const encodeNumber=y;export const encodeArray=z;export const encodeString=A;export const encodeMap=B;export const encodeSet=C;export const encodeObject=D;export const AS_IS=l;
export const atomizer=function(a){a=void 0===a?{}:a;var b=a.keepUnknownsAsIs?H:G;return u({m:a["void"]||v,i:a["null"]||w,g:a["boolean"]||x,j:a.number||y,Array:a.Array||z,l:a.string||A,Map:a.Map||B,Set:a.Set||C,object:a.object||D,h:a["function"]||b})};
