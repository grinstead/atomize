var d={},n={};
function p(a){return function(b){function h(c){if(void 0===c)var e=a.m;else if(null===c)e=a.i;else if("boolean"===typeof c)e=a.h;else if("number"===typeof c)e=a.j;else if("string"===typeof c)e=a.l;else if(Array.isArray(c))e=a.g;else throw Error("TODO");var x=g,y=f;g=c;f=m.length;e(c,k)?l.set(c,0<=f?f<<1|1:-f):0>f&&l.delete(c);g=x;f=y}function k(c,e){if(e===d)m.push(c);else if(c===n)g!==d&&(0<=f&&(f=~(f<<1)),l.set(g,-f),g=d);else if(0<=f&&(f=~(f<<1),l.set(c,-1)),e=l.get(c),null!=e){if(-1===e)throw Error("Infinite loop when encoding "+
c);m.push(0<=e?e:-e)}else h(c)}var m=[],l=new Map,f=0,g=d;h(b);return m}}function q(a){a(2,d)}function r(a){a(4,d)}function t(a,b){b(a?6:8,d)}function u(a,b){if(a!==a)return b(10,d),!1;a===(a|0)?(b(12,d),b(a,d)):(b(14,d),b(a,d));return!0}function v(a,b){b(n);b(16,d);var h=a.length;b(h,d);for(var k=0;k<h;k++)b(a[k]);return!0}function w(a,b){b(18,d);b(a,d);return!0};export const ALLOW_SELF_REFERENCE=n;export const encodeVoid=q;export const encodeNull=r;export const encodeBoolean=t;export const encodeNumber=u;export const encodeArray=v;export const encodeString=w;export const atomizer=function(a){a=void 0===a?{}:a;return p({m:a["void"]||q,i:a["null"]||r,h:a["boolean"]||t,j:a.number||u,g:a.array||v,l:a.string||w})};
