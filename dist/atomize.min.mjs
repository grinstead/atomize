var c={},n={};
function p(a){return function(d){function h(b){if(void 0===b)var f=a.l;else if(null===b)f=a.i;else if("boolean"===typeof b)f=a.h;else if("number"===typeof b)f=a.j;else if(Array.isArray(b))f=a.g;else throw Error("TODO");var w=g,x=e;g=b;e=m.length;f(b,k)?l.set(b,0<=e?e<<1|1:-e):0>e&&l.delete(b);g=w;e=x}function k(b,f){if(f===c)m.push(b);else if(b===n)g!==c&&(0<=e&&(e=~(e<<1)),l.set(g,-e),g=c);else if(0<=e&&(e=~(e<<1),l.set(b,-1)),f=l.get(b),null!=f){if(-1===f)throw Error("Infinite loop when encoding "+b);
m.push(0<=f?f:-f)}else h(b)}var m=[],l=new Map,e=0,g=c;h(d);return m}}function q(a){a(2,c)}function r(a){a(4,c)}function t(a,d){d(a?6:8,c)}function u(a,d){if(a!==a)return d(10,c),!1;a===(a|0)?(d(12,c),d(a,c)):(d(14,c),d(a,c));return!0}function v(a,d){d(n);d(16,c);var h=a.length;d(h,c);for(var k=0;k<h;k++)d(a[k]);return!0};export const ALLOW_SELF_REFERENCE=n;export const encodeVoid=q;export const encodeNull=r;export const encodeBoolean=t;export const encodeNumber=u;export const encodeArray=v;export const atomizer=function(a){a=void 0===a?{}:a;return p({l:a["void"]||q,i:a["null"]||r,h:a["boolean"]||t,j:a.number||u,g:a.array||v})};
