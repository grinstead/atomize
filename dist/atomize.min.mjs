var e={},l={},n={},p={};
function t(a){return function(b){function h(c){if(void 0===c)var d=a.l;else if(null===c)d=a.h;else if("boolean"===typeof c)d=a.g;else if("number"===typeof c)d=a.i;else if("string"===typeof c)d=a.j;else if(c instanceof Map)d=a.Map;else if(c instanceof Set)d=a.Set;else if(Array.isArray(c))d=a.Array;else{if((d=Object.getPrototypeOf(c))&&d!==Object.prototype)throw Error("TODO");d=a.object}var D=m,E=g;m=c;g=f.length;d(c,k)?q.set(c,0<=g?g<<1|1:-g):0>g&&q.delete(c);m=D;g=E}function k(c,d){if(d===e)f.push(c);
else if(c===l)m!==e&&(0<=g&&(g=~(g<<1)),q.set(m,-g),m=e);else if(c===n)r.push(f.push(-1)-1);else if(c===p)f[r.pop()]=f.length;else if(0<=g&&(g=~(g<<1),q.set(c,-1)),d=q.get(c),null!=d){if(-1===d)throw Error("Infinite loop when encoding "+c);f.push(0<=d?d:-d)}else h(c)}var f=[],q=new Map,r=[],g=0,m=e;h(b);return f}}function u(a){a(2,e)}function v(a){a(4,e)}function w(a,b){b(a?6:8,e)}function x(a,b){if(a!==a)return b(10,e),!1;a===(a|0)?(b(12,e),b(a,e)):(b(14,e),b(a,e));return!0}
function y(a,b){b(l);b(16,e);b(n);for(var h=a.length,k=0;k<h;k++)b(a[k]);b(p);return!0}function z(a,b){b(18,e);b(a,e);return!0}function A(a,b){b(l);b(20,e);b(n);a.forEach(function(h,k){b(k)});b(p);a.forEach(function(h){b(h)});return!0}function B(a,b){b(l);b(22,e);b(n);a.forEach(function(h){b(h)});b(p);return!0}function C(a,b){b(l);b(24,e);b(n);for(var h=Object.keys(a),k=h.length,f=0;f<k;f++)b(h[f]);b(p);for(f=0;f<k;f++)b(a[h[f]]);return!0};export const ALLOW_SELF_REFERENCE=l;export const encodeVoid=u;export const encodeNull=v;export const encodeBoolean=w;export const encodeNumber=x;export const encodeArray=y;export const encodeString=z;export const encodeMap=A;export const encodeSet=B;export const encodeObject=C;export const atomizer=function(a){a=void 0===a?{}:a;return t({l:a["void"]||u,h:a["null"]||v,g:a["boolean"]||w,i:a.number||x,Array:a.Array||y,j:a.string||z,Map:a.Map||A,Set:a.Set||B,object:a.object||C})};
